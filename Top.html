<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Zıplayan Top</title>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#game{
  position:relative;
  width:100%;
  max-width:600px;
  height:320px;
  background:#000;
  overflow:hidden;
  border:2px solid #333;
}
#ball{
  position:absolute;
  width:18px;
  height:18px;
  border-radius:50%;
  background:#00ffd0;
  left:70px;
}
#ground{
  position:absolute;
  bottom:0;
  height:40px;
  width:100%;
  background:#222;
}
.star{
  position:absolute;
  background:#fff;
  border-radius:50%;
}
.obstacle{
  position:absolute;
}
.vertical.low{background:#ff5555;width:18px;}
.vertical.high{background:#ff8844;width:22px;}
.top{background:#5599ff;width:22px;}
.platform{
  background:#55ff88;
  height:10px;
  border-radius:4px;
}
#score{
  position:absolute;
  top:10px;
  left:10px;
  font-size:18px;
}
#gameover{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  font-size:24px;
  text-align:center;
}
</style>
</head>

<body>

<div id="game">
  <div id="score">Skor: 0</div>
  <div id="ball"></div>
  <div id="ground"></div>
  <div id="gameover">Oyun Bitti<br>Tekrar başlamak için tıkla</div>
</div>

<script>
/* ===== ELEMENTS ===== */
const game = document.getElementById("game");
const ball = document.getElementById("ball");
const ground = document.getElementById("ground");
const scoreEl = document.getElementById("score");
const gameOverEl = document.getElementById("gameover");

/* ===== PHYSICS ===== */
let y = 80;
let vy = 0;
const gravity = 0.5;
const jumpPower = 9;
let onGround = false;

/* ===== GAME STATE ===== */
let speed = 3;
let frame = 0;
let score = 0;
let running = true;
const obstacles = [];
const stars = [];

/* ===== INPUT ===== */
function jump(){
  if(!running) return;
  if(onGround){
    vy = jumpPower;
    onGround = false;
  }
}
game.addEventListener("click", jump);
document.addEventListener("keydown", e=>{
  if(e.code==="Space") jump();
});

/* ===== LOOP ===== */
function loop(){
  if(!running) return;
  frame++;

  /* hız artışı */
  if(frame % 700 === 0) speed += 0.4;

  /* yıldız üret */
  if(frame % 15 === 0){
    const s = document.createElement("div");
    const size = Math.random()*2 + 1;
    s.className = "star";
    s.style.width = size+"px";
    s.style.height = size+"px";
    s.style.right = "-5px";
    s.style.top = Math.random()*200+"px";
    s.dataset.speed = (Math.random()*0.5 + 0.2);
    game.appendChild(s);
    stars.push(s);
  }

  /* yıldız hareket */
  for(let i=stars.length-1;i>=0;i--){
    const s = stars[i];
    s.style.left = (s.offsetLeft - speed*s.dataset.speed) + "px";
    if(s.offsetLeft < -5){
      s.remove();
      stars.splice(i,1);
    }
  }

  /* yerçekimi */
  vy -= gravity;
  y += vy;
  onGround = false;

  /* zemin çarpışma */
  if(y <= 40){
    y = 40;
    vy = Math.sin(frame/10)*0.6; // küçük zıplama hissi
    onGround = true;
  }

  /* engel üret */
  if(frame % 140 === 0){
    let o = document.createElement("div");
    let type = Math.random();

    if(type < 0.35){
      o.className="obstacle vertical low";
      o.style.height="30px";
      o.style.bottom="40px";
    }else if(type < 0.65){
      o.className="obstacle vertical high";
      o.style.height="70px";
      o.style.bottom="40px";
    }else if(type < 0.85){
      o.className="obstacle top";
      o.style.height="40px";
      o.style.top="40px";
    }else{
      o.className="obstacle platform";
      o.style.width="60px";
      o.style.bottom=(80+Math.random()*60)+"px";
    }

    o.style.right="-80px";
    game.appendChild(o);
    obstacles.push(o);
  }

  /* engel hareket & çarpışma */
  for(let i=obstacles.length-1;i>=0;i--){
    const o = obstacles[i];
    o.style.left = (o.offsetLeft - speed) + "px";

    const bx = 70, bw = 18, by = y, bh = 18;
    const ox = o.offsetLeft, ow = o.offsetWidth;
    const oy = o.offsetTop, oh = o.offsetHeight;

    // platform üstüne çıkma
    if(o.classList.contains("platform")){
      if(
        bx + bw > ox && bx < ox + ow &&
        by > oy + oh - 8 && by < oy + oh + 4 &&
        vy <= 0
      ){
        y = oy + oh;
        vy = Math.sin(frame/10)*0.6;
        onGround = true;
      }
    }else{
      // çarpışma
      if(
        bx < ox + ow && bx + bw > ox &&
        by < oy + oh && by + bh > oy
      ){
        endGame();
      }
    }

    if(ox < -100){
      o.remove();
      obstacles.splice(i,1);
      score++;
      scoreEl.textContent = "Skor: " + score;
    }
  }

  ball.style.bottom = y + "px";
  requestAnimationFrame(loop);
}

/* ===== GAME OVER ===== */
function endGame(){
  running = false;
  gameOverEl.style.display = "flex";
}
gameOverEl.onclick = ()=>location.reload();

loop();
</script>

</body>
</html>
