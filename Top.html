<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Zıplayan Top</title>

<style>
body{
  margin:0;
  background:#111;
  color:#fff;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#game{
  position:relative;
  width:100%;
  max-width:600px;
  height:300px;
  background:#222;
  overflow:hidden;
  border:2px solid #444;
}
#ball{
  position:absolute;
  width:20px;
  height:20px;
  border-radius:50%;
  background:#00ffcc;
  left:60px;
  bottom:40px;
}
.obstacle{
  position:absolute;
  width:20px;
  background:#ff5555;
  bottom:40px;
}
#ground{
  position:absolute;
  bottom:0;
  height:40px;
  width:100%;
  background:#333;
}
#score{
  position:absolute;
  top:10px;
  left:10px;
  font-size:18px;
}
#gameover{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.7);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  display:none;
}
</style>
</head>

<body>

<div id="game">
  <div id="score">Skor: 0</div>
  <div id="ball"></div>
  <div id="ground"></div>
  <div id="gameover">Oyun Bitti<br>Yeniden başlamak için tıkla</div>
</div>

<script>
/* ===== STATE ===== */
var ball = document.getElementById("ball");
var game = document.getElementById("game");
var scoreEl = document.getElementById("score");
var gameOverEl = document.getElementById("gameover");

var y = 40;
var velocity = 0;
var gravity = 0.6;
var jumpPower = 10;

var obstacles = [];
var speed = 3;
var frame = 0;
var score = 0;
var running = true;

/* ===== INPUT ===== */
function jump(){
  if(!running) return;
  velocity = jumpPower;
}

game.addEventListener("click", jump);
document.addEventListener("keydown", e=>{
  if(e.code==="Space") jump();
});

/* ===== LOOP ===== */
function loop(){
  if(!running) return;

  frame++;

  // gravity
  velocity -= gravity;
  y += velocity;
  if(y < 40){ y = 40; velocity = 0; }

  ball.style.bottom = y + "px";

  // spawn obstacle
  if(frame % 120 === 0){
    var o = document.createElement("div");
    o.className = "obstacle";
    o.style.height = (30 + Math.random()*40) + "px";
    o.style.right = "-20px";
    game.appendChild(o);
    obstacles.push(o);
  }

  // move obstacles
  for(var i=obstacles.length-1;i>=0;i--){
    var o = obstacles[i];
    var x = o.offsetLeft - speed;
    o.style.left = x + "px";

    // collision
    if(
      x < 80 && x > 40 &&
      y < 40 + o.offsetHeight
    ){
      endGame();
    }

    // passed
    if(x < -30){
      obstacles.splice(i,1);
      o.remove();
      score++;
      scoreEl.textContent = "Skor: " + score;
    }
  }

  requestAnimationFrame(loop);
}

function endGame(){
  running = false;
  gameOverEl.style.display = "flex";
}

gameOverEl.addEventListener("click", ()=>{
  location.reload();
});

loop();
</script>

</body>
</html>
