<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Zıplayan Top</title>

<style>
body{
  margin:0;
  background:#111;
  color:#fff;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#game{
  position:relative;
  width:100%;
  max-width:600px;
  height:300px;
  background:linear-gradient(#1a1a1a,#222);
  overflow:hidden;
  border:2px solid #444;
}
#ball{
  position:absolute;
  width:20px;
  height:20px;
  border-radius:50%;
  background:#00ffcc;
  left:60px;
  bottom:40px;
}
#ground{
  position:absolute;
  bottom:0;
  height:40px;
  width:200%;
  background:
    repeating-linear-gradient(
      90deg,
      #333 0,
      #333 40px,
      #2a2a2a 40px,
      #2a2a2a 80px
    );
}
.obstacle{
  position:absolute;
  width:20px;
  bottom:40px;
}
.low{ background:#ff5555; }
.high{ background:#ff8844; }
.top{
  background:#55aaff;
  top:40px;
}
.decor{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  background:#555;
  opacity:0.6;
}
#score{
  position:absolute;
  top:10px;
  left:10px;
  font-size:18px;
}
#gameover{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  font-size:24px;
  text-align:center;
}
</style>
</head>

<body>

<div id="game">
  <div id="score">Skor: 0</div>
  <div id="ball"></div>
  <div id="ground"></div>
  <div id="gameover">Oyun Bitti<br>Tekrar başlamak için tıkla</div>
</div>

<script>
/* ===== STATE ===== */
var game = document.getElementById("game");
var ball = document.getElementById("ball");
var ground = document.getElementById("ground");
var scoreEl = document.getElementById("score");
var gameOverEl = document.getElementById("gameover");

var y = 40;
var velocity = 0;
var gravity = 0.6;
var jumpPower = 10;

var obstacles = [];
var decors = [];

var speed = 3;
var frame = 0;
var score = 0;
var running = true;
var groundX = 0;

/* ===== INPUT ===== */
function jump(){
  if(!running) return;
  velocity = jumpPower;
}
game.addEventListener("click", jump);
document.addEventListener("keydown", e=>{
  if(e.code==="Space") jump();
});

/* ===== LOOP ===== */
function loop(){
  if(!running) return;
  frame++;

  /* hız artışı */
  if(frame % 600 === 0){
    speed += 0.5;
  }

  /* yerçekimi */
  velocity -= gravity;
  y += velocity;
  if(y < 40){ y = 40; velocity = 0; }
  ball.style.bottom = y + "px";

  /* zemin kayma */
  groundX -= speed;
  ground.style.left = groundX + "px";
  if(groundX < -600) groundX = 0;

  /* dekor ekle */
  if(frame % 50 === 0){
    var d = document.createElement("div");
    d.className = "decor";
    d.style.right = "-10px";
    d.style.bottom = (60 + Math.random()*160) + "px";
    game.appendChild(d);
    decors.push(d);
  }

  /* dekor hareket */
  for(var i=decors.length-1;i>=0;i--){
    var d = decors[i];
    d.style.left = (d.offsetLeft - speed*0.5) + "px";
    if(d.offsetLeft < -10){
      d.remove();
      decors.splice(i,1);
    }
  }

  /* engel üret */
  if(frame % 140 === 0){
    var o = document.createElement("div");
    var type = Math.random();
    if(type < 0.4){
      o.className = "obstacle low";
      o.style.height = "30px";
      o.style.bottom = "40px";
    }else if(type < 0.75){
      o.className = "obstacle high";
      o.style.height = "60px";
      o.style.bottom = "40px";
    }else{
      o.className = "obstacle top";
      o.style.height = "40px";
    }
    o.style.right = "-20px";
    game.appendChild(o);
    obstacles.push(o);
  }

  /* engel hareket + çarpışma */
  for(var i=obstacles.length-1;i>=0;i--){
    var o = obstacles[i];
    o.style.left = (o.offsetLeft - speed) + "px";

    var ox = o.offsetLeft;
    var ow = o.offsetWidth;
    var oh = o.offsetHeight;

    if(
      ox < 80 && ox + ow > 40 &&
      (
        (o.classList.contains("top") && y + 20 > game.clientHeight - oh) ||
        (!o.classList.contains("top") && y < 40 + oh)
      )
    ){
      endGame();
    }

    if(ox < -30){
      o.remove();
      obstacles.splice(i,1);
      score++;
      scoreEl.textContent = "Skor: " + score;
    }
  }

  requestAnimationFrame(loop);
}

function endGame(){
  running = false;
  gameOverEl.style.display = "flex";
}

gameOverEl.addEventListener("click", ()=>{
  location.reload();
});

loop();
</script>

</body>
</html>
